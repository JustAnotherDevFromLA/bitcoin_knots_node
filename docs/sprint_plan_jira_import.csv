"Issue Key","Issue Type","Summary","Description","Epic Link","Parent ID"
"BKN-1","Epic","Migration - Azure to Home Lab","This epic covers all activities required to move the Bitcoin Node Helper services, data, and configurations from the Azure VM to the local Ubuntu home lab machine.","",""
"BKN-2","Story","Prepare Source Azure Server for Migration","As a node operator, I want to gracefully shut down services and create comprehensive backups on the Azure VM so that data consistency is maintained and all critical components are secured before transfer.","BKN-1",""
"BKN-3","Task","Stop Nginx service.","`sudo systemctl stop nginx.service`","BKN-1","BKN-2"
"BKN-4","Task","Stop Mempool.space Backend & Dashboard PM2 processes.","`sudo -u bitcoin_knots_node env PM2_HOME=/home/bitcoin_knots_node/.pm2 pm2 stop all`","BKN-1","BKN-2"
"BKN-5","Task","Stop Electrs service.","`sudo systemctl stop electrs.service`","BKN-1","BKN-2"
"BKN-6","Task","Stop Bitcoin Core (bitcoind) service.","`sudo systemctl stop bitcoind.service`","BKN-1","BKN-2"
"BKN-7","Task","Disable and backup all cron jobs for root and `bitcoin_knots_node` user.","`crontab -l > /home/bitcoin_knots_node/cron_backup_$(date +%F).txt`
`sudo -u bitcoin_knots_node crontab -l > /home/bitcoin_knots_node/cron_backup_bitcoin_knots_node_$(date +%F).txt`
`crontab -r`
`sudo -u bitcoin_knots_node crontab -r`","BKN-1","BKN-2"
"BKN-8","Task","Create `migration_backup` directory and set permissions.","`mkdir -p /home/bitcoin_knots_node/migration_backup`
`sudo chown bitcoin_knots_node:bitcoin_knots_node /home/bitcoin_knots_node/migration_backup`","BKN-1","BKN-2"
"BKN-9","Task","Backup Bitcoin Core data directory.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/bitcoin_data.tar.gz /home/bitcoin_knots_node/.bitcoin`","BKN-1","BKN-2"
"BKN-10","Task","Backup Electrs database.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/electrs_db.tar.gz /home/bitcoin_knots_node/bitcoin_node_helper/electrs/db/bitcoin`","BKN-1","BKN-2"
"BKN-11","Task","Backup Mempool backend configuration.","`cp /home/bitcoin_knots_node/bitcoin_node_helper/mempool/backend/mempool-config.json /home/bitcoin_knots_node/migration_backup/`","BKN-1","BKN-2"
"BKN-12","Task","Backup MariaDB `mempool` database.","`sudo mysqldump -u root -p mempool > /home/bitcoin_knots_node/migration_backup/mempool_mariadb.sql`","BKN-1","BKN-2"
"BKN-13","Task","Backup Nginx configurations.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/nginx_configs.tar.gz /etc/nginx`","BKN-1","BKN-2"
"BKN-14","Task","Backup Mempool frontend static files.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/mempool_frontend.tar.gz /var/www/mempool/browser`","BKN-1","BKN-2"
"BKN-15","Task","Backup Systemd service files (`bitcoind.service`, `electrs.service`).","`cp /etc/systemd/system/bitcoind.service /home/bitcoin_knots_node/migration_backup/`
`cp /etc/systemd/system/electrs.service /etc/systemd/system/`","BKN-1","BKN-2"
"BKN-16","Task","Backup `bitcoin_node_helper` project directory.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/bitcoin_node_helper.tar.gz /home/bitcoin_knots_node/bitcoin_node_helper`","BKN-1","BKN-2"
"BKN-17","Task","Backup PM2 configuration.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/pm2_home.tar.gz /home/bitcoin_knots_node/.pm2`","BKN-1","BKN-2"
"BKN-18","Task","Backup Postfix and Mailutils configurations.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/postfix_mailutils.tar.gz /etc/postfix /etc/mailutils`","BKN-1","BKN-2"
"BKN-19","Task","Backup Fail2ban configurations.","`sudo tar -czvf /home/bitcoin_knots_node/migration_backup/fail2ban_configs.tar.gz /etc/fail2ban`","BKN-1","BKN-2"
"BKN-20","Task","Backup SSH configuration.","`cp -r /home/bitcoin_knots_node/.ssh /home/bitcoin_knots_node/migration_backup/`","BKN-1","BKN-2"
"BKN-21","Task","Transfer `migration_backup` directory to local machine.","`scp -r /home/bitcoin_knots_node/migration_backup <local_user>@<local_ip>:/path/to/local/backup/`","BKN-1","BKN-2"
"BKN-22","Task","Verify integrity of transferred backups (checksums, partial restore).","","BKN-1","BKN-2"

"BKN-23","Story","Provision Local Home Lab Server (MIG-2)","As a node operator, I want to prepare the local Ubuntu machine with all necessary operating system and software dependencies so that it can host the Bitcoin Node Helper services.","BKN-1",""
"BKN-24","Task","Install a fresh copy of Ubuntu Server (same version as Azure VM if possible).","","BKN-1","BKN-23"
"BKN-25","Task","Run `sudo apt update && sudo apt upgrade -y`","","BKN-1","BKN-23"
"BKN-26","Task","Install essential tools (`curl`, `wget`, `git`, `tar`, `rsync`, `bc`, `net-tools`, `htop`, `iotop`).","","BKN-1","BKN-23"
"BKN-27","Task","Install Bitcoin Core build dependencies.","","BKN-1","BKN-23"
"BKN-28","Task","Install MariaDB Server and Client.","","BKN-1","BKN-23"
"BKN-29","Task","Install Nginx Web Server.","","BKN-1","BKN-23"
"BKN-30","Task","Install Node.js and npm via NVM (ensure matching version).","","BKN-1","BKN-23"
"BKN-31","Task","Install `pm2` globally.","","BKN-1","BKN-23"
"BKN-32","Task","Install Rust (for Electrs).","","BKN-1","BKN-23"
"BKN-33","Task","Install Mail Utilities and Postfix.","","BKN-1","BKN-23"
"BKN-34","Task","Install Fail2ban.","","BKN-1","BKN-23"
"BKN-35","Task","Install `jq` (JSON processor).","","BKN-1","BKN-23"
"BKN-36","Task","Install Uncomplicated Firewall (`ufw`).","","BKN-1","BKN-23"
"BKN-37","Task","Create system users (`bitcoin_knots_node`, `electrs`) and add `bitcoin_knots_node` to sudo group.","","BKN-1","BKN-23"

"BKN-38","Story","Restore Data and Configurations on Home Lab Server (MIG-3)","As a node operator, I want to restore all backed-up data and configuration files to their correct locations on the home lab server so that the services can function as they did on Azure.","BKN-1",""
"BKN-39","Task","Move `migration_backup` to a temporary restore location (`/tmp/migration_restore`).","","BKN-1","BKN-38"
"BKN-40","Task","Extract `bitcoin_data.tar.gz` to root.","","BKN-1","BKN-38"
"BKN-41","Task","Extract `electrs_db.tar.gz` to root.","","BKN-1","BKN-38"
"BKN-42","Task","Extract `nginx_configs.tar.gz` to root.","","BKN-1","BKN-38"
"BKN-43","Task","Extract `mempool_frontend.tar.gz` to root.","","BKN-1","BKN-38"
"BKN-44","Task","Extract `bitcoin_node_helper.tar.gz` to `/home/bitcoin_knots_node/`.","","BKN-1","BKN-38"
"BKN-45","Task","Extract `pm2_home.tar.gz` to `/home/bitcoin_knots_node/`.","","BKN-1","BKN-38"
"BKN-46","Task","Extract `postfix_mailutils.tar.gz` to root.","","BKN-1","BKN-38"
"BKN-47","Task","Extract `fail2ban_configs.tar.gz` to root.","","BKN-1","BKN-38"
"BKN-48","Task","Copy `mempool-config.json` to Mempool backend directory.","","BKN-1","BKN-38"
"BKN-49","Task","Copy `bitcoind.service` to `/etc/systemd/system/`.","","BKN-1","BKN-38"
"BKN-50","Task","Copy `electrs.service` to `/etc/systemd/system/`.","","BKN-1","BKN-38"
"BKN-51","Task","Copy `cron_backup_*.txt` files to `/home/bitcoin_knots_node/`.","","BKN-1","BKN-38"
"BKN-52","Task","Restore SSH configuration.","","BKN-1","BKN-38"
"BKN-53","Task","Restore MariaDB `mempool` database from `mempool_mariadb.sql`.","","BKN-1","BKN-38"
"BKN-54","Task","Correct file and directory ownership and permissions for all restored items (especially `bitcoin_knots_node` user files, `/var/www/mempool/browser` for `www-data`, Nginx configs, logs).","","BKN-1","BKN-38"

"BKN-55","Story","Configure Services and Firewall on Home Lab Server (MIG-4)","As a node operator, I want to adjust configuration files for the new environment and secure network access so that all services are properly connected and protected.","BKN-1",""
"BKN-56","Task","Review and update `bitcoin.conf` for `datadir`, `rpcbind`, `bind` (if needed for local network access).","","BKN-1","BKN-55"
"BKN-57","Task","Review and update `electrs.toml` for `daemon_dir`, `cookie`, `db_dir`, `electrum_rpc_addr` (if needed for local network access).","","BKN-1","BKN-55"
"BKN-58","Task","Review and update Nginx configuration files (`/etc/nginx/sites-available/default`, `mempool-nginx.conf`) for `listen` directives and `root` paths.","","BKN-1","BKN-55"
"BKN-59","Task","Review and update `mempool/backend/mempool-config.json` for `COOKIE_PATH`, `CORE_RPC_HOST`, `DB_HOST`.","","BKN-1","BKN-55"
"BKN-60","Task","Review Systemd service files (`bitcoind.service`, `electrs.service`) for correct `ExecStart` paths.","","BKN-1","BKN-55"
"BKN-61","Task","Review project scripts (`alert_manager.sh`, `system_health_report.sh`, etc.) for absolute paths and update `alert_manager/config.yaml` and `/etc/postfix/sasl_passwd` if needed.","","BKN-1","BKN-55"
"BKN-62","Task","Configure `ufw` firewall to allow necessary incoming connections (SSH, Bitcoin P2P, Electrs RPC, HTTP/S, Dashboard).","`sudo ufw allow 22/tcp`
`sudo ufw allow 8333/tcp`
`sudo ufw allow 8332/tcp`
`sudo ufw allow 50001/tcp`
`sudo ufw allow 50002/tcp`
`sudo ufw allow 80/tcp`
`sudo ufw allow 443/tcp`
`sudo ufw allow 3000/tcp`
`sudo ufw enable`
`sudo ufw status`","BKN-1","BKN-55"

"BKN-63","Story","Verify and Go-Live on Home Lab Server (MIG-5)","As a node operator, I want to start all services incrementally and thoroughly test their functionality so that I can confirm a successful migration and decommission the old Azure VM.","BKN-1",""
"BKN-64","Task","Start MariaDB service and enable it at boot.","`sudo systemctl start mariadb.service && sudo systemctl enable mariadb.service`","BKN-1","BKN-63"
"BKN-65","Task","Start Bitcoin Core (bitcoind) service, enable at boot, and monitor logs.","`sudo systemctl start bitcoind.service && sudo systemctl enable bitcoind.service`","BKN-1","BKN-63"
"BKN-66","Task","Start Electrs service, enable at boot, and monitor logs.","`sudo systemctl start electrs.service && sudo systemctl enable electrs.service`","BKN-1","BKN-63"
"BKN-67","Task","Start Mempool.space Backend & Dashboard PM2 processes, save PM2 state, and monitor logs.","`sudo -u bitcoin_knots_node env PM2_HOME=/home/bitcoin_knots_node/.pm2 pm2 start all`
`sudo -u bitcoin_knots_node env PM2_HOME=/home/bitcoin_knots_node/.pm2 pm2 save`","BKN-1","BKN-63"
"BKN-68","Task","Start Nginx service, enable at boot, and monitor logs.","`sudo systemctl start nginx.service && sudo systemctl enable nginx.service`","BKN-1","BKN-63"
"BKN-69","Task","Re-enable all cron jobs.","","BKN-1","BKN-63"
"BKN-70","Task","Monitor all service logs for errors and unexpected behavior.","","BKN-1","BKN-63"
"BKN-71","Task","Verify Bitcoin Core functionality (`getblockchaininfo`, `getconnectioncount`).","","BKN-1","BKN-63"
"BKN-72","Task","Verify Electrs functionality (check logs, connect Electrum wallet).","","BKN-1","BKN-63"
"BKN-73","Task","Verify Mempool.space functionality (access frontend, check data updates).","","BKN-1","BKN-63"
"BKN-74","Task","Verify Email Alerts (trigger report, check content, test critical alert).","","BKN-1","BKN-63"
"BKN-75","Task","Verify Dashboard functionality (access dashboard, check metrics).","","BKN-1","BKN-63"
"BKN-76","Task","Update DNS A record to point to the new home lab IP (if applicable).","","BKN-1","BKN-63"
"BKN-77","Task","Decommission Azure VM.","","BKN-1","BKN-63"

"BKN-78","Epic","Monitoring Enhancements (MON)","This epic focuses on enhancing the existing monitoring system, specifically by implementing bandwidth monitoring and refining alerting thresholds.","",""
"BKN-79","Story","Implement Bandwidth Monitoring (MON-1)","As a node operator, I want to track network bandwidth usage so that I can monitor node performance and identify potential network bottlenecks or unusual activity.","BKN-78",""
"BKN-80","Task","Research and select a suitable bandwidth monitoring tool (e.g., `vnstat`, `iftop`, Prometheus/Grafana setup).","","BKN-78","BKN-79"
"BKN-81","Task","Install and configure the chosen bandwidth monitoring tool.","","BKN-78","BKN-79"
"BKN-82","Task","Integrate bandwidth data into `system_health_report.sh` (if feasible and aligns with existing report format).","","BKN-78","BKN-79"
"BKN-83","Task","Update `send_health_report_v2.sh` (or `alert_manager.sh`) to include bandwidth metrics in daily email reports.","","BKN-78","BKN-79"
"BKN-84","Task","Define a threshold for unusual bandwidth usage.","","BKN-78","BKN-79"
"BKN-85","Task","Update `alert_manager.sh` to trigger an alert if bandwidth usage exceeds the defined threshold.","","BKN-78","BKN-79"

"BKN-86","Story","Refine Alerting Thresholds (MON-2)","As a node operator, I want to fine-tune the existing alert thresholds so that I receive timely and relevant notifications for critical system events without excessive false positives.","BKN-78",""
"BKN-87","Task","Review current `alert_manager/config.yaml` thresholds for CPU, memory, disk usage.","","BKN-78","BKN-86"
"BKN-88","Task","Adjust thresholds based on observed home lab performance characteristics.","","BKN-78","BKN-86"
"BKN-89","Task","Define new thresholds for services (e.g., Bitcoin Core block processing lag, Electrs indexing lag, Mempool backend update frequency).","","BKN-78","BKN-86"
"BKN-90","Task","Implement logic in `alert_manager.sh` (or helper scripts) to check these new service-specific thresholds.","","BKN-78","BKN-86"
"BKN-91","Task","Test new thresholds by simulating alerts or observing system under load.","","BKN-78","BKN-86"

"BKN-92","Epic","Documentation Updates (DOC)","This epic ensures that all project documentation is current and accurately reflects the new home lab environment and the migration process.","",""
"BKN-93","Story","Update Migration Guide (DOC-1)","As a node operator, I want the migration plan document to reflect the successful migration and any lessons learned so that it serves as an accurate historical record and a guide for future similar operations.","BKN-92",""
"BKN-94","Task","Review `docs/migration_plan.md` and update it with actual commands used and any deviations.","","BKN-92","BKN-93"
"BKN-95","Task","Add a 'Lessons Learned' section to `docs/migration_plan.md`.","","BKN-92","BKN-93"
"BKN-96","Task","Mark the migration plan as 'Completed' or 'Executed'.","","BKN-92","BKN-93"

"BKN-97","Story","Document Home Lab Setup (DOC-2)","As a node operator, I want a clear and comprehensive document detailing the specific configuration of the home lab server so that I can easily reference it for troubleshooting, maintenance, or future rebuilds.","BKN-92",""
"BKN-98","Task","Create a new document (e.g., `docs/home_lab_setup.md`).","","BKN-92","BKN-97"
"BKN-99","Task","Detail hardware specifications of the home lab server.","","BKN-92","BKN-97"
"BKN-100","Task","Document Ubuntu OS version and specific customizations.","","BKN-92","BKN-97"
"BKN-101","Task","List all installed dependencies and their versions.","","BKN-92","BKN-97"
"BKN-102","Task","Document custom user accounts and their permissions.","","BKN-92","BKN-97"
"BKN-103","Task","Detail firewall (`ufw`) rules.","","BKN-92","BKN-97"
"BKN-104","Task","Document network configuration (static IP, router settings, port forwarding if applicable).","","BKN-92","BKN-97"
"BKN-105","Task","Document physical setup and considerations (power, cooling, physical security).","","BKN-92","BKN-97"
"BKN-106","Task","Include a diagram of the home lab network if helpful.","","BKN-92","BKN-97"
"BKN-107","Task","Review and ensure `docs/PROJECT_HISTORY.md` and `docs/roadmap.md` are updated to reflect the completed migration.","","BKN-92","BKN-97"